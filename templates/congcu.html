<!DOCTYPE html>
<html lang="vi">
<head>
  <meta charset="UTF-8">
  <title>C√¥ng c·ª• Google</title>
  <link rel="icon" href="https://img.icons8.com/?size=100&id=17949&format=png&color=000000" type="image/x-icon">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 min-h-screen flex flex-col items-center p-6">
  <div class="w-full max-w-3xl bg-white rounded-2xl shadow-lg p-6">
    <h2 class="text-2xl font-bold mb-4 text-blue-700">C√¥ng c·ª•</h2>

    <label class="block mb-2 font-semibold">üîó Nh·∫≠p link ch·ª©a g√≥i Google:</label>
    <textarea id="linkInput" rows="5" class="w-full p-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="D√°n link v√†o ƒë√¢y..."></textarea>

    <div class="mt-6">
      <h3 class="font-semibold text-lg mb-2">Ch·ªçn g√≥i m·ªõi:</h3>
      <div class="space-x-4">
        <label><input type="radio" name="newPkg" value="5tb.annual" class="mr-1"> 5TB</label>
        <label><input type="radio" name="newPkg" value="10tb" class="mr-1"> 10TB</label>
        <label><input type="radio" name="newPkg" value="20tb" class="mr-1"> 20TB</label>
        <label><input type="radio" name="newPkg" value="30tb" class="mr-1"> 30TB</label>
      </div>
    </div>

    <div class="mt-6">
      <h3 class="font-semibold text-lg mb-2">Ch·ªçn m√£ code m·ªõi:</h3>
      <div class="space-x-4">
        <label><input type="radio" name="newCode" value="0" class="mr-1"> 2C0</label>
      </div>
    </div>

    <div class="mt-6 text-center">
      <button onclick="generate()" class="bg-blue-600 hover:bg-blue-700 text-white font-semibold py-2 px-6 rounded-xl shadow transition-all">
        üöÄM·ªü link
      </button>
    </div>
  </div>

  <script>
    async function generate() {
  const original = document.getElementById("linkInput").value.trim();
  const pkgRadio = document.querySelector('input[name="newPkg"]:checked');
  const codeRadio = document.querySelector('input[name="newCode"]:checked');

  if (!pkgRadio || !codeRadio) {
    alert("‚ö†Ô∏è Vui l√≤ng ch·ªçn c·∫£ g√≥i v√† m√£ code m·ªõi!");
    return;
  }

  const res = await fetch('/api/congcu', {
    method: 'POST',
    headers: { 'Content-Type': 'application/json' },
    body: JSON.stringify({
      link: original,
      newPkg: pkgRadio.value,
      newCode: codeRadio.value
    })
  });

  const data = await res.json();
  if (data.new_link) {
    window.open(data.new_link, '_blank');
  } else {
    alert("‚ùå L·ªói x·ª≠ l√Ω: " + (data.error || "Kh√¥ng x√°c ƒë·ªãnh"));
  }
}
  </script>
</body>
</html>
